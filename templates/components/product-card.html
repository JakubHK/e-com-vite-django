{% load static %}
<article class="group rounded-lg border border-gray-200 bg-white shadow-sm overflow-hidden flex flex-col">
  <a href="{{ product.get_absolute_url }}" class="block aspect-[4/3] overflow-hidden bg-gray-100">
    {% if product.image_url %}
      <img src="{{ product.image_url }}" alt="{{ product.title }}" class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105">
    {% else %}
      <div class="h-full w-full grid place-items-center text-gray-400 text-sm">No image</div>
    {% endif %}
  </a>

  <div class="p-4 flex-1 flex flex-col gap-3">
    <a href="{{ product.get_absolute_url }}" class="text-sm font-medium text-gray-900 line-clamp-2 hover:underline">
      {{ product.title }}
    </a>
    <div class="mt-auto flex items-center justify-between">
      <p class="text-base font-semibold text-gray-900">
        {{ product.price }} {{ product.currency }}
      </p>
      <form
        hx-post="{% url 'cart_add' %}"
        hx-target="#cart-badge"
        hx-swap="outerHTML"
      >
        {% csrf_token %}
        <input type="hidden" name="product_id" value="{{ product.id }}">
        <input type="hidden" name="qty" value="1">
        <button type="submit" class="inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
          Add
        </button>
      </form>
    </div>
  </div>
</article>